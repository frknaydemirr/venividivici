<div class="container py-5">
<div class="search-section text-center mb-5">
    <h2 class="display-5 fw-bold mb-4">Where To Conquer?</h2>
    
    <app-search-box></app-search-box>
    
</div>

    <section class="mb-5">
        <h3 class="section-title">Most Conquered Cities</h3>
        <div class="row g-4 mb-4">
            <div *ngFor="let city of mostConqueredCities" class="col-6 col-md-3 col-lg-2">
                <div class="conquer-card text-center">
                    <div class="img-wrapper mb-2">
                        <img [src]="city.url" [alt]="city['city-name']" class="img-fluid rounded">
                    </div>
                    <h5 class="city-name">{{ city['city-name'] }}</h5>
                </div>
            </div>
        </div>
        <div class="text-center">
            <button class="btn btn-custom" (click)="loadMostConqueredCities()" *ngIf="hasMoreCities">
                Explore More Cities
            </button>
            <div *ngIf="!hasMoreCities && mostConqueredCities.length > 0" class="text-muted small italic">TÃ¼m ÅŸehirler yÃ¼klendi.</div>
        </div>
    </section>

    <section class="mb-5">
        <h3 class="section-title">Most Conquered Countries</h3>
        <div class="row g-4">
            <div *ngFor="let country of mostConqueredCountries" class="col-6 col-md-3 col-lg-2">
                <div class="conquer-card text-center">
                    <div class="img-wrapper mb-2">
                        <img [src]="country.url" [alt]="country['country-name']" class="img-fluid rounded shadow-sm">
                    </div>
                    <h5 class="city-name">{{ country['country-name'] }}</h5>
                </div>
            </div>
        </div>
    </section>

    <hr class="my-5 opacity-10">

    <div class="row">
        <div class="col-lg-6 mb-4">
            <h3 class="section-title">Questions from Subscriptions</h3>
            <div class="question-scroll-container">
                <div *ngFor="let q of subscriptionQuestions" class="card question-card mb-3 shadow-sm">
                    <div class="card-body d-flex">
                        <img [src]="'${apiHost}/users/' + q.username + '/img'" class="user-avatar rounded-circle shadow-sm me-3">
                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <span class="badge rounded-pill bg-soft-info text-info mb-2">Subscription</span>
                                <small class="text-muted">{{ q['creation-time'] | date:'mediumDate' }}</small>
                            </div>
                            <h5 class="card-title h6 fw-bold text-dark">{{ q['question-title'] }}</h5>
                            <p class="card-text text-secondary small text-truncate-2">{{ q['question-body'] | slice:0:100 }}...</p>
                            <div class="d-flex justify-content-between align-items-center mt-2 border-top pt-2">
                                <span class="small fw-bold text-dark">@{{ q.username }}</span>
                                <a href="#" class="text-decoration-none small fw-bold">View Details â†’</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <h3 class="section-title">Hot Questions</h3>
            <div class="question-scroll-container">
                <div *ngFor="let q of hotQuestions" class="card question-card mb-3 shadow-sm border-start border-warning border-4">
                    <div class="card-body d-flex">
                        <img [src]="'${apiHost}/users/' + q.username + '/img'" class="user-avatar rounded-circle shadow-sm me-3">
                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <span class="badge rounded-pill bg-soft-warning text-warning mb-2">ðŸ”¥ Hot</span>
                                <small class="text-muted">{{ q['creation-time'] | date:'mediumDate' }}</small>
                            </div>
                            <h5 class="card-title h6 fw-bold text-dark">{{ q['question-title'] }}</h5>
                            <p class="card-text text-secondary small text-truncate-2">{{ q['question-body'] | slice:0:100 }}...</p>
                            <div class="d-flex justify-content-between align-items-center mt-2 border-top pt-2">
                                <span class="small fw-bold text-dark">@{{ q.username }}</span>
                                <span class="text-danger small fw-bold italic">Trending now</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="btn btn-outline-primary w-100 mt-3 shadow-sm">Load More Questions</button>
        </div>
    </div>
</div>